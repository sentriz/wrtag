<!DOCTYPE html>
<html>
  <head>
    <title>wrtag</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/htmx.org/dist/htmx.js"></script>
    <script src="https://unpkg.com/htmx.org/dist/ext/sse.js"></script>
    <script src="https://unpkg.com/htmx.org/dist/ext/debug.js"></script> 
    <style type="text/tailwindcss">
      @layer base {
        a { @apply font-normal text-blue-600; }
        button { @apply font-normal text-blue-700; }
        input { @apply h-3.5 outline outline-1 outline-gray-100 rounded-sm; }
      }
      @layer utilities {
        .htmx-request { @apply pointer-events-none opacity-50; }
      }
    </style>
  </head>
  <body hx-ext="sse" sse-connect="/events?stream=jobs" class="font-mono antialiased leading-tight text-sm text-gray-800 flex flex-col items-start gap-3 m-0 p-3">
    <h1 class="text-lg">wrtag</h1>
    {{ block "jobs" . }}
    <div hx-get="/jobs" hx-trigger="sse:jobs" class="contents">
      {{ if eq (len .) 0 }}<p class="text-gray-600">no jobs yet ...</p>{{ end }}
      {{ range . }}
        <div hx-get="/jobs/{{ .ID }}" hx-trigger="sse:job-{{ .ID }}">
          {{ template "release.html" . }}
        </div>
      {{ end }}
    </div>
    {{ end }}
  </body>
</html>
